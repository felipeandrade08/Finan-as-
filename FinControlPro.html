import React, { useState, useEffect } from 'react';
import { DollarSign, TrendingUp, TrendingDown, PlusCircle, BarChart3, LogOut, User, Calendar, Tag, AlertTriangle, Bell, Target, CreditCard, Wallet, ArrowUpRight, ArrowDownRight, Settings, Download, FileText, Award, ChevronRight } from 'lucide-react';
import { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Area, AreaChart } from 'recharts';

// Simula√ß√£o de banco de dados
const DB = {
  users: [],
  transactions: [],
  budgets: [],
  goals: [],
  currentUser: null
};

const FinancialSystem = () => {
  const [page, setPage] = useState('login');
  const [user, setUser] = useState(null);
  const [formData, setFormData] = useState({});
  const [transactions, setTransactions] = useState([]);
  const [budgets, setBudgets] = useState([]);
  const [goals, setGoals] = useState([]);
  const [filter, setFilter] = useState('month');
  const [error, setError] = useState('');
  const [success, setSuccess] = useState('');
  const [notifications, setNotifications] = useState([]);

  // Carregar dados do armazenamento
  useEffect(() => {
    loadData();
  }, []);

  // Salvar dados quando houver mudan√ßas
  useEffect(() => {
    if (user) {
      saveData();
      checkAlerts();
    }
  }, [transactions, budgets, goals, user]);

  const loadData = async () => {
    try {
      const usersData = await window.storage.get('users', false);
      const transData = await window.storage.get('transactions', false);
      const budgetsData = await window.storage.get('budgets', false);
      const goalsData = await window.storage.get('goals', false);
      const currentUserData = await window.storage.get('currentUser', false);
      
      if (usersData) DB.users = JSON.parse(usersData.value);
      if (transData) DB.transactions = JSON.parse(transData.value);
      if (budgetsData) DB.budgets = JSON.parse(budgetsData.value);
      if (goalsData) DB.goals = JSON.parse(goalsData.value);
      if (currentUserData) {
        const userData = JSON.parse(currentUserData.value);
        DB.currentUser = userData;
        setUser(userData);
        setPage('dashboard');
        loadUserData(userData.id);
      }
    } catch (err) {
      console.log('Primeira inicializa√ß√£o do sistema');
    }
  };

  const saveData = async () => {
    try {
      await window.storage.set('users', JSON.stringify(DB.users), false);
      await window.storage.set('transactions', JSON.stringify(DB.transactions), false);
      await window.storage.set('budgets', JSON.stringify(DB.budgets), false);
      await window.storage.set('goals', JSON.stringify(DB.goals), false);
      if (DB.currentUser) {
        await window.storage.set('currentUser', JSON.stringify(DB.currentUser), false);
      }
    } catch (err) {
      console.error('Erro ao salvar dados:', err);
    }
  };

  const loadUserData = (userId) => {
    const userTrans = DB.transactions.filter(t => t.userId === userId);
    const userBudgets = DB.budgets.filter(b => b.userId === userId);
    const userGoals = DB.goals.filter(g => g.userId === userId);
    setTransactions(userTrans);
    setBudgets(userBudgets);
    setGoals(userGoals);
  };

  const checkAlerts = () => {
    const alerts = [];
    const now = new Date();
    const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
    const monthTransactions = transactions.filter(t => new Date(t.date) >= monthStart);

    // Verificar or√ßamentos excedidos
    budgets.forEach(budget => {
      const categoryExpenses = monthTransactions
        .filter(t => t.type === 'expense' && t.category === budget.category)
        .reduce((sum, t) => sum + t.amount, 0);
      
      const percentage = (categoryExpenses / budget.amount) * 100;
      
      if (percentage >= 100) {
        alerts.push({
          type: 'danger',
          message: `Or√ßamento de ${budget.category} excedido! (${percentage.toFixed(0)}%)`,
          icon: AlertTriangle
        });
      } else if (percentage >= 80) {
        alerts.push({
          type: 'warning',
          message: `Or√ßamento de ${budget.category} em ${percentage.toFixed(0)}% do limite`,
          icon: AlertTriangle
        });
      }
    });

    // Verificar gastos anormais
    const thisMonthExpenses = monthTransactions
      .filter(t => t.type === 'expense')
      .reduce((sum, t) => sum + t.amount, 0);
    
    const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);
    const lastMonthEnd = new Date(now.getFullYear(), now.getMonth(), 0);
    const lastMonthExpenses = transactions
      .filter(t => t.type === 'expense' && new Date(t.date) >= lastMonth && new Date(t.date) <= lastMonthEnd)
      .reduce((sum, t) => sum + t.amount, 0);

    if (lastMonthExpenses > 0 && thisMonthExpenses > lastMonthExpenses * 1.3) {
      alerts.push({
        type: 'warning',
        message: `Seus gastos est√£o 30% acima do m√™s passado!`,
        icon: TrendingUp
      });
    }

    setNotifications(alerts);
  };

  // Autentica√ß√£o
  const handleRegister = async (e) => {
    e.preventDefault();
    const { name, email, password, confirmPassword } = formData;

    if (!name || !email || !password) {
      setError('Preencha todos os campos');
      return;
    }

    if (password.length < 6) {
      setError('A senha deve ter no m√≠nimo 6 caracteres');
      return;
    }

    if (password !== confirmPassword) {
      setError('As senhas n√£o coincidem');
      return;
    }

    if (DB.users.find(u => u.email === email)) {
      setError('Email j√° cadastrado');
      return;
    }

    const newUser = {
      id: Date.now(),
      name,
      email,
      password: btoa(password),
      createdAt: new Date().toISOString()
    };

    DB.users.push(newUser);
    await saveData();
    setError('');
    setSuccess('Conta criada com sucesso! Fa√ßa login para continuar.');
    setFormData({});
    setTimeout(() => {
      setPage('login');
      setSuccess('');
    }, 2000);
  };

  const handleLogin = async (e) => {
    e.preventDefault();
    const { email, password } = formData;

    const foundUser = DB.users.find(u => u.email === email && atob(u.password) === password);

    if (!foundUser) {
      setError('Email ou senha incorretos');
      return;
    }

    DB.currentUser = foundUser;
    setUser(foundUser);
    loadUserData(foundUser.id);
    await saveData();
    setError('');
    setFormData({});
    setPage('dashboard');
  };

  const handleLogout = async () => {
    DB.currentUser = null;
    setUser(null);
    setTransactions([]);
    setBudgets([]);
    setGoals([]);
    await window.storage.delete('currentUser', false);
    setPage('login');
  };

  // Transa√ß√µes
  const handleAddTransaction = async (e) => {
    e.preventDefault();
    const { type, amount, category, description, date } = formData;

    if (!type || !amount || !category || !date) {
      setError('Preencha todos os campos obrigat√≥rios');
      return;
    }

    const newTransaction = {
      id: Date.now(),
      userId: user.id,
      type,
      amount: parseFloat(amount),
      category,
      description: description || '',
      date,
      createdAt: new Date().toISOString()
    };

    DB.transactions.push(newTransaction);
    const userTrans = [...transactions, newTransaction];
    setTransactions(userTrans);
    await saveData();
    setError('');
    setSuccess('Transa√ß√£o adicionada com sucesso!');
    setFormData({});
    setTimeout(() => setSuccess(''), 3000);
  };

  // Or√ßamentos
  const handleAddBudget = async (e) => {
    e.preventDefault();
    const { category, amount } = formData;

    if (!category || !amount) {
      setError('Preencha todos os campos');
      return;
    }

    const newBudget = {
      id: Date.now(),
      userId: user.id,
      category,
      amount: parseFloat(amount),
      createdAt: new Date().toISOString()
    };

    DB.budgets.push(newBudget);
    setBudgets([...budgets, newBudget]);
    await saveData();
    setError('');
    setSuccess('Or√ßamento definido com sucesso!');
    setFormData({});
    setTimeout(() => setSuccess(''), 3000);
  };

  // Metas
  const handleAddGoal = async (e) => {
    e.preventDefault();
    const { name, targetAmount, deadline } = formData;

    if (!name || !targetAmount || !deadline) {
      setError('Preencha todos os campos');
      return;
    }

    const newGoal = {
      id: Date.now(),
      userId: user.id,
      name,
      targetAmount: parseFloat(targetAmount),
      currentAmount: 0,
      deadline,
      createdAt: new Date().toISOString()
    };

    DB.goals.push(newGoal);
    setGoals([...goals, newGoal]);
    await saveData();
    setError('');
    setSuccess('Meta criada com sucesso!');
    setFormData({});
    setTimeout(() => setSuccess(''), 3000);
  };

  // C√°lculos financeiros
  const getFilteredTransactions = () => {
    const now = new Date();
    let startDate;

    switch (filter) {
      case 'week':
        startDate = new Date(now.setDate(now.getDate() - 7));
        break;
      case 'month':
        startDate = new Date(now.setMonth(now.getMonth() - 1));
        break;
      case 'year':
        startDate = new Date(now.setFullYear(now.getFullYear() - 1));
        break;
      default:
        return transactions;
    }

    return transactions.filter(t => new Date(t.date) >= startDate);
  };

  const calculateTotals = () => {
    const filtered = getFilteredTransactions();
    const income = filtered.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
    const expense = filtered.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
    return { income, expense, balance: income - expense };
  };

  const getChartData = () => {
    const filtered = getFilteredTransactions();
    const grouped = {};

    filtered.forEach(t => {
      const month = new Date(t.date).toLocaleDateString('pt-BR', { month: 'short', year: '2-digit' });
      if (!grouped[month]) {
        grouped[month] = { month, income: 0, expense: 0 };
      }
      grouped[month][t.type] += t.amount;
    });

    return Object.values(grouped).sort((a, b) => new Date(a.month) - new Date(b.month));
  };

  const getCategoryData = () => {
    const filtered = getFilteredTransactions().filter(t => t.type === 'expense');
    const grouped = {};

    filtered.forEach(t => {
      if (!grouped[t.category]) {
        grouped[t.category] = { name: t.category, value: 0 };
      }
      grouped[t.category].value += t.amount;
    });

    return Object.values(grouped);
  };

  const COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899', '#14b8a6', '#f97316'];

  // P√°ginas
  const LoginPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4 relative overflow-hidden">
      {/* Background decorativo */}
      <div className="absolute inset-0 overflow-hidden">
        <div className="absolute -top-1/2 -left-1/2 w-full h-full bg-blue-500/10 rounded-full blur-3xl"></div>
        <div className="absolute -bottom-1/2 -right-1/2 w-full h-full bg-purple-500/10 rounded-full blur-3xl"></div>
      </div>

      <div className="relative bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-10 w-full max-w-md border border-white/20">
        <div className="text-center mb-8">
          <div className="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl mb-4 shadow-lg transform hover:scale-110 transition-transform">
            <Wallet className="w-10 h-10 text-white" />
          </div>
          <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent">
            FinControl Pro
          </h1>
          <p className="text-gray-600 mt-3 text-lg">Controle financeiro inteligente</p>
        </div>

        <form onSubmit={handleLogin} className="space-y-5">
          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Email</label>
            <input
              type="email"
              value={formData.email || ''}
              onChange={(e) => setFormData({...formData, email: e.target.value})}
              className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
              placeholder="seu@email.com"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Senha</label>
            <input
              type="password"
              value={formData.password || ''}
              onChange={(e) => setFormData({...formData, password: e.target.value})}
              className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            />
          </div>

          {error && (
            <div className="bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2">
              <AlertTriangle className="w-4 h-4" />
              {error}
            </div>
          )}

          {success && (
            <div className="bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-lg text-sm">
              {success}
            </div>
          )}

          <button
            type="submit"
            className="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
          >
            Entrar
          </button>
        </form>

        <div className="mt-8 text-center">
          <p className="text-gray-600 mb-3">N√£o tem uma conta?</p>
          <button
            onClick={() => { setPage('register'); setError(''); setFormData({}); }}
            className="text-blue-600 hover:text-blue-800 font-semibold hover:underline"
          >
            Criar conta gratuita ‚Üí
          </button>
        </div>

        <div className="mt-8 pt-6 border-t border-gray-200">
          <p className="text-xs text-gray-500 text-center">
            Seus dados est√£o seguros e criptografados
          </p>
        </div>
      </div>
    </div>
  );

  const RegisterPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4 relative overflow-hidden">
      {/* Background decorativo */}
      <div className="absolute inset-0 overflow-hidden">
        <div className="absolute -top-1/2 -left-1/2 w-full h-full bg-purple-500/10 rounded-full blur-3xl"></div>
        <div className="absolute -bottom-1/2 -right-1/2 w-full h-full bg-blue-500/10 rounded-full blur-3xl"></div>
      </div>

      <div className="relative bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-10 w-full max-w-md border border-white/20">
        <div className="text-center mb-8">
          <div className="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl mb-4 shadow-lg">
            <User className="w-10 h-10 text-white" />
          </div>
          <h1 className="text-4xl font-bold bg-gradient-to-r from-purple-600 to-purple-800 bg-clip-text text-transparent">
            Criar Conta
          </h1>
          <p className="text-gray-600 mt-3 text-lg">Comece sua jornada financeira</p>
        </div>

        <form onSubmit={handleRegister} className="space-y-5">
          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Nome Completo</label>
            <input
              type="text"
              value={formData.name || ''}
              onChange={(e) => setFormData({...formData, name: e.target.value})}
              className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
              placeholder="Seu nome"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Email</label>
            <input
              type="email"
              value={formData.email || ''}
              onChange={(e) => setFormData({...formData, email: e.target.value})}
              className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
              placeholder="seu@email.com"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Senha</label>
            <input
              type="password"
              value={formData.password || ''}
              onChange={(e) => setFormData({...formData, password: e.target.value})}
              className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
              placeholder="M√≠nimo 6 caracteres"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Confirmar Senha</label>
            <input
              type="password"
              value={formData.confirmPassword || ''}
              onChange={(e) => setFormData({...formData, confirmPassword: e.target.value})}
              className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
              placeholder="Digite a senha novamente"
            />
          </div>

          {error && (
            <div className="bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg text-sm flex items-center gap-2">
              <AlertTriangle className="w-4 h-4" />
              {error}
            </div>
          )}

          {success && (
            <div className="bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-lg text-sm">
              {success}
            </div>
          )}

          <button
            type="submit"
            className="w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
          >
            Criar Conta
          </button>
        </form>

        <div className="mt-8 text-center">
          <p className="text-gray-600 mb-3">J√° tem uma conta?</p>
          <button
            onClick={() => { setPage('login'); setError(''); setFormData({}); }}
            className="text-purple-600 hover:text-purple-800 font-semibold hover:underline"
          >
            Fazer login ‚Üí
          </button>
        </div>
      </div>
    </div>
  );

  const DashboardPage = () => {
    const totals = calculateTotals();
    const recentTransactions = getFilteredTransactions().slice(-6).reverse();
    const chartData = getChartData();

    return (
      <div className="space-y-6">
        {/* Cabe√ßalho */}
        <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <div>
            <h2 className="text-3xl font-bold text-gray-800">Ol√°, {user.name}! üëã</h2>
            <p className="text-gray-600 mt-1">Aqui est√° um resumo das suas finan√ßas</p>
          </div>
          <div className="flex items-center gap-3">
            <select
              value={filter}
              onChange={(e) => setFilter(e.target.value)}
              className="px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-medium"
            >
              <option value="week">√öltima semana</option>
              <option value="month">√öltimo m√™s</option>
              <option value="year">√öltimo ano</option>
              <option value="all">Tudo</option>
            </select>
          </div>
        </div>

        {/* Alertas */}
        {notifications.length > 0 && (
          <div className="space-y-3">
            {notifications.map((notif, index) => (
              <div
                key={index}
                className={`p-4 rounded-xl border-l-4 ${
                  notif.type === 'danger'
                    ? 'bg-red-50 border-red-500 text-red-800'
                    : 'bg-yellow-50 border-yellow-500 text-yellow-800'
                } flex items-center gap-3 shadow-sm`}
              >
                <notif.icon className="w-5 h-5" />
                <span className="font-medium">{notif.message}</span>
              </div>
            ))}
          </div>
        )}

        {/* Cards principais */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div className="bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-shadow">
            <div className="flex items-center justify-between mb-4">
              <div className="bg-white/20 backdrop-blur-sm rounded-xl p-3">
                <ArrowUpRight className="w-6 h-6" />
              </div>
              <span className="text-emerald-100 text-sm font-medium">Receitas</span>
            </div>
            <p className="text-4xl font-bold mb-2">R$ {totals.income.toFixed(2)}</p>
            <p className="text-emerald-100 text-sm">+{((totals.income / (totals.income + totals.expense)) * 100 || 0).toFixed(1)}% do total</p>
          </div>

          <div className="bg-gradient-to-br from-rose-500 to-rose-600 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-shadow">
            <div className="flex items-center justify-between mb-4">
              <div className="bg-white/20 backdrop-blur-sm rounded-xl p-3">
                <ArrowDownRight className="w-6 h-6" />
              </div>
              <span className="text-rose-100 text-sm font-medium">Despesas</span>
            </div>
            <p className="text-4xl font-bold mb-2">R$ {totals.expense.toFixed(2)}</p>
            <p className="text-rose-100 text-sm">{((totals.expense / (totals.income + totals.expense)) * 100 || 0).toFixed(1)}% do total</p>
          </div>

          <div className={`bg-gradient-to-br ${totals.balance >= 0 ? 'from-blue-500 to-blue-600' : 'from-orange-500 to-orange-600'} rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-shadow`}>
            <div className="flex items-center justify-between mb-4">
              <div className="bg-white/20 backdrop-blur-sm rounded-xl p-3">
                <Wallet className="w-6 h-6" />
              </div>
              <span className={`${totals.balance >= 0 ? 'text-blue-100' : 'text-orange-100'} text-sm font-medium`}>Saldo</span>
            </div>
            <p className="text-4xl font-bold mb-2">R$ {totals.balance.toFixed(2)}</p>
            <p className={`${totals.balance >= 0 ? 'text-blue-100' : 'text-orange-100'} text-sm`}>
              {totals.balance >= 0 ? 'Situa√ß√£o positiva' : 'Aten√ß√£o necess√°ria'}
            </p>
          </div>
        </div>

        {/* Gr√°fico de evolu√ß√£o */}
        {chartData.length > 0 && (
          <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
            <h3 className="text-xl font-bold text-gray-800 mb-6 flex items-center gap-2">
              <TrendingUp className="w-5 h-5 text-blue-600" />
              Evolu√ß√£o Financeira
            </h3>
            <ResponsiveContainer width="100%" height={300}>
              <AreaChart data={chartData}>
                <defs>
                  <linearGradient id="colorIncome" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="5%" stopColor="#10b981" stopOpacity={0.3}/>
                    <stop offset="95%" stopColor="#10b981" stopOpacity={0}/>
                  </linearGradient>
                  <linearGradient id="colorExpense" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="5%" stopColor="#ef4444" stopOpacity={0.3}/>
                    <stop offset="95%" stopColor="#ef4444" stopOpacity={0}/>
                  </linearGradient>
                </defs>
                <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                <XAxis dataKey="month" stroke="#9ca3af" />
                <YAxis stroke="#9ca3af" />
                <Tooltip 
                  contentStyle={{ backgroundColor: '#fff', border: '1px solid #e5e7eb', borderRadius: '8px' }}
                />
                <Area type="monotone" dataKey="income" stroke="#10b981" strokeWidth={2} fillOpacity={1} fill="url(#colorIncome)" name="Receitas" />
                <Area type="monotone" dataKey="expense" stroke="#ef4444" strokeWidth={2} fillOpacity={1} fill="url(#colorExpense)" name="Despesas" />
              </AreaChart>
            </ResponsiveContainer>
          </div>
        )}

        {/* Transa√ß√µes recentes e Metas */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Transa√ß√µes recentes */}
          <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
            <div className="flex items-center justify-between mb-6">
              <h3 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                <FileText className="w-5 h-5 text-blue-600" />
                Transa√ß√µes Recentes
              </h3>
              <button 
                onClick={() => setPage('transactions')}
                className="text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1"
              >
                Ver todas
                <ChevronRight className="w-4 h-4" />
              </button>
            </div>
            {recentTransactions.length === 0 ? (
              <p className="text-gray-500 text-center py-8">Nenhuma transa√ß√£o registrada</p>
            ) : (
              <div className="space-y-3">
                {recentTransactions.map(t => (
                  <div key={t.id} className="flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                    <div className="flex items-center gap-3">
                      <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${t.type === 'income' ? 'bg-emerald-100' : 'bg-rose-100'}`}>
                        {t.type === 'income' ? <ArrowUpRight className="w-6 h-6 text-emerald-600" /> : <ArrowDownRight className="w-6 h-6 text-rose-600" />}
                      </div>
                      <div>
                        <p className="font-semibold text-gray-800">{t.category}</p>
                        <p className="text-sm text-gray-500">{new Date(t.date).toLocaleDateString('pt-BR')}</p>
                      </div>
                    </div>
                    <p className={`font-bold text-lg ${t.type === 'income' ? 'text-emerald-600' : 'text-rose-600'}`}>
                      {t.type === 'income' ? '+' : '-'} R$ {t.amount.toFixed(2)}
                    </p>
                  </div>
                ))}
              </div>
            )}
          </div>

          {/* Metas financeiras */}
          <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
            <div className="flex items-center justify-between mb-6">
              <h3 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                <Target className="w-5 h-5 text-blue-600" />
                Metas Financeiras
              </h3>
              <button 
                onClick={() => setPage('goals')}
                className="text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1"
              >
                Gerenciar
                <ChevronRight className="w-4 h-4" />
              </button>
            </div>
            {goals.length === 0 ? (
              <div className="text-center py-8">
                <Target className="w-12 h-12 text-gray-300 mx-auto mb-3" />
                <p className="text-gray-500 mb-4">Nenhuma meta definida</p>
                <button
                  onClick={() => setPage('goals')}
                  className="px-4 py-2 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors"
                >
                  Criar Meta
                </button>
              </div>
            ) : (
              <div className="space-y-4">
                {goals.slice(0, 3).map(goal => {
                  const progress = (goal.currentAmount / goal.targetAmount) * 100;
                  return (
                    <div key={goal.id} className="p-4 bg-gray-50 rounded-xl">
                      <div className="flex items-center justify-between mb-2">
                        <p className="font-semibold text-gray-800">{goal.name}</p>
                        <span className="text-sm font-bold text-blue-600">{progress.toFixed(0)}%</span>
                      </div>
                      <div className="w-full bg-gray-200 rounded-full h-2 mb-2">
                        <div 
                          className="bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-500"
                          style={{ width: `${Math.min(progress, 100)}%` }}
                        ></div>
                      </div>
                      <p className="text-sm text-gray-600">
                        R$ {goal.currentAmount.toFixed(2)} de R$ {goal.targetAmount.toFixed(2)}
                      </p>
                    </div>
                  );
                })}
              </div>
            )}
          </div>
        </div>
      </div>
    );
  };

  const TransactionsPage = () => (
    <div className="space-y-6">
      <h2 className="text-3xl font-bold text-gray-800">Lan√ßamentos Financeiros</h2>

      <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
        <h3 className="text-xl font-semibold text-gray-800 mb-6 flex items-center gap-2">
          <PlusCircle className="w-5 h-5 text-blue-600" />
          Nova Transa√ß√£o
        </h3>
        <form onSubmit={handleAddTransaction} className="space-y-4">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Tipo *</label>
              <select
                value={formData.type || ''}
                onChange={(e) => setFormData({...formData, type: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-medium"
                required
              >
                <option value="">Selecione o tipo</option>
                <option value="income">üí∞ Receita</option>
                <option value="expense">üí∏ Despesa</option>
              </select>
            </div>

            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Valor *</label>
              <input
                type="number"
                step="0.01"
                value={formData.amount || ''}
                onChange={(e) => setFormData({...formData, amount: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="0.00"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Categoria *</label>
              <input
                type="text"
                value={formData.category || ''}
                onChange={(e) => setFormData({...formData, category: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="Ex: Sal√°rio, Alimenta√ß√£o, Transporte"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Data *</label>
              <input
                type="date"
                value={formData.date || ''}
                onChange={(e) => setFormData({...formData, date: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required
              />
            </div>
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Descri√ß√£o</label>
            <textarea
              value={formData.description || ''}
              onChange={(e) => setFormData({...formData, description: e.target.value})}
              className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              rows="3"
              placeholder="Informa√ß√µes adicionais (opcional)"
            />
          </div>

          {error && (
            <div className="bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-xl text-sm flex items-center gap-2">
              <AlertTriangle className="w-4 h-4" />
              {error}
            </div>
          )}

          {success && (
            <div className="bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-xl text-sm">
              {success}
            </div>
          )}

          <button
            type="submit"
            className="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2"
          >
            <PlusCircle className="w-5 h-5" />
            Adicionar Transa√ß√£o
          </button>
        </form>
      </div>

      <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
        <h3 className="text-xl font-semibold text-gray-800 mb-6">Hist√≥rico Completo</h3>
        {transactions.length === 0 ? (
          <div className="text-center py-12">
            <FileText className="w-16 h-16 text-gray-300 mx-auto mb-4" />
            <p className="text-gray-500 text-lg">Nenhuma transa√ß√£o registrada</p>
            <p className="text-gray-400 text-sm mt-2">Adicione sua primeira transa√ß√£o acima</p>
          </div>
        ) : (
          <div className="space-y-2 max-h-96 overflow-y-auto">
            {transactions.slice().reverse().map(t => (
              <div key={t.id} className="flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                <div className="flex items-center gap-4 flex-1">
                  <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${t.type === 'income' ? 'bg-emerald-100' : 'bg-rose-100'}`}>
                    {t.type === 'income' ? <ArrowUpRight className="w-6 h-6 text-emerald-600" /> : <ArrowDownRight className="w-6 h-6 text-rose-600" />}
                  </div>
                  <div className="flex-1">
                    <p className="font-semibold text-gray-800">{t.category}</p>
                    <p className="text-sm text-gray-600">{t.description}</p>
                    <p className="text-xs text-gray-400 mt-1">{new Date(t.date).toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}</p>
                  </div>
                </div>
                <p className={`font-bold text-xl ${t.type === 'income' ? 'text-emerald-600' : 'text-rose-600'}`}>
                  {t.type === 'income' ? '+' : '-'} R$ {t.amount.toFixed(2)}
                </p>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );

  const ReportsPage = () => {
    const chartData = getChartData();
    const categoryData = getCategoryData();

    return (
      <div className="space-y-6">
        <div className="flex items-center justify-between">
          <h2 className="text-3xl font-bold text-gray-800 flex items-center gap-2">
            <BarChart3 className="w-8 h-8 text-blue-600" />
            Relat√≥rios Financeiros
          </h2>
          <select
            value={filter}
            onChange={(e) => setFilter(e.target.value)}
            className="px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 font-medium"
          >
            <option value="week">√öltima semana</option>
            <option value="month">√öltimo m√™s</option>
            <option value="year">√öltimo ano</option>
            <option value="all">Tudo</option>
          </select>
        </div>

        <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
          <h3 className="text-xl font-semibold text-gray-800 mb-6">Evolu√ß√£o Temporal</h3>
          {chartData.length === 0 ? (
            <div className="text-center py-12">
              <BarChart3 className="w-16 h-16 text-gray-300 mx-auto mb-4" />
              <p className="text-gray-500">Sem dados para exibir no per√≠odo selecionado</p>
            </div>
          ) : (
            <ResponsiveContainer width="100%" height={350}>
              <LineChart data={chartData}>
                <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                <XAxis dataKey="month" stroke="#9ca3af" />
                <YAxis stroke="#9ca3af" />
                <Tooltip contentStyle={{ backgroundColor: '#fff', border: '1px solid #e5e7eb', borderRadius: '12px' }} />
                <Legend />
                <Line type="monotone" dataKey="income" stroke="#10b981" strokeWidth={3} name="Receitas" dot={{ r: 5 }} />
                <Line type="monotone" dataKey="expense" stroke="#ef4444" strokeWidth={3} name="Despesas" dot={{ r: 5 }} />
              </LineChart>
            </ResponsiveContainer>
          )}
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
            <h3 className="text-xl font-semibold text-gray-800 mb-6">Comparativo Mensal</h3>
            {chartData.length === 0 ? (
              <p className="text-gray-500 text-center py-8">Sem dados dispon√≠veis</p>
            ) : (
              <ResponsiveContainer width="100%" height={300}>
                <BarChart data={chartData}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                  <XAxis dataKey="month" stroke="#9ca3af" />
                  <YAxis stroke="#9ca3af" />
                  <Tooltip contentStyle={{ backgroundColor: '#fff', border: '1px solid #e5e7eb', borderRadius: '12px' }} />
                  <Legend />
                  <Bar dataKey="income" fill="#10b981" name="Receitas" radius={[8, 8, 0, 0]} />
                  <Bar dataKey="expense" fill="#ef4444" name="Despesas" radius={[8, 8, 0, 0]} />
                </BarChart>
              </ResponsiveContainer>
            )}
          </div>

          <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
            <h3 className="text-xl font-semibold text-gray-800 mb-6">Distribui√ß√£o de Gastos</h3>
            {categoryData.length === 0 ? (
              <p className="text-gray-500 text-center py-8">Sem dados dispon√≠veis</p>
            ) : (
              <ResponsiveContainer width="100%" height={300}>
                <PieChart>
                  <Pie
                    data={categoryData}
                    cx="50%"
                    cy="50%"
                    labelLine={false}
                    label={(entry) => `${entry.name}: R$ ${entry.value.toFixed(2)}`}
                    outerRadius={100}
                    fill="#8884d8"
                    dataKey="value"
                  >
                    {categoryData.map((entry, index) => (
                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                    ))}
                  </Pie>
                  <Tooltip contentStyle={{ backgroundColor: '#fff', border: '1px solid #e5e7eb', borderRadius: '12px' }} />
                </PieChart>
              </ResponsiveContainer>
            )}
          </div>
        </div>
      </div>
    );
  };

  const BudgetsPage = () => (
    <div className="space-y-6">
      <h2 className="text-3xl font-bold text-gray-800 flex items-center gap-2">
        <CreditCard className="w-8 h-8 text-blue-600" />
        Or√ßamentos
      </h2>

      <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
        <h3 className="text-xl font-semibold text-gray-800 mb-6">Definir Novo Or√ßamento</h3>
        <form onSubmit={handleAddBudget} className="space-y-4">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Categoria *</label>
              <input
                type="text"
                value={formData.category || ''}
                onChange={(e) => setFormData({...formData, category: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="Ex: Alimenta√ß√£o, Transporte"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Valor Mensal *</label>
              <input
                type="number"
                step="0.01"
                value={formData.amount || ''}
                onChange={(e) => setFormData({...formData, amount: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="0.00"
                required
              />
            </div>
          </div>

          {error && (
            <div className="bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-xl text-sm flex items-center gap-2">
              <AlertTriangle className="w-4 h-4" />
              {error}
            </div>
          )}

          {success && (
            <div className="bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-xl text-sm">
              {success}
            </div>
          )}

          <button
            type="submit"
            className="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg"
          >
            Adicionar Or√ßamento
          </button>
        </form>
      </div>

      <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
        <h3 className="text-xl font-semibold text-gray-800 mb-6">Or√ßamentos Ativos</h3>
        {budgets.length === 0 ? (
          <div className="text-center py-12">
            <CreditCard className="w-16 h-16 text-gray-300 mx-auto mb-4" />
            <p className="text-gray-500">Nenhum or√ßamento definido</p>
          </div>
        ) : (
          <div className="space-y-4">
            {budgets.map(budget => {
              const now = new Date();
              const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
              const spent = transactions
                .filter(t => t.type === 'expense' && t.category === budget.category && new Date(t.date) >= monthStart)
                .reduce((sum, t) => sum + t.amount, 0);
              const percentage = (spent / budget.amount) * 100;

              return (
                <div key={budget.id} className="p-5 bg-gray-50 rounded-xl">
                  <div className="flex items-center justify-between mb-3">
                    <h4 className="font-bold text-gray-800 text-lg">{budget.category}</h4>
                    <span className={`font-bold ${percentage >= 100 ? 'text-red-600' : percentage >= 80 ? 'text-yellow-600' : 'text-green-600'}`}>
                      {percentage.toFixed(0)}%
                    </span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-3 mb-3">
                    <div 
                      className={`h-3 rounded-full transition-all duration-500 ${percentage >= 100 ? 'bg-red-500' : percentage >= 80 ? 'bg-yellow-500' : 'bg-green-500'}`}
                      style={{ width: `${Math.min(percentage, 100)}%` }}
                    ></div>
                  </div>
                  <div className="flex justify-between text-sm">
                    <span className="text-gray-600">Gasto: R$ {spent.toFixed(2)}</span>
                    <span className="text-gray-600">Limite: R$ {budget.amount.toFixed(2)}</span>
                  </div>
                </div>
              );
            })}
          </div>
        )}
      </div>
    </div>
  );

  const GoalsPage = () => (
    <div className="space-y-6">
      <h2 className="text-3xl font-bold text-gray-800 flex items-center gap-2">
        <Target className="w-8 h-8 text-blue-600" />
        Metas Financeiras
      </h2>

      <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
        <h3 className="text-xl font-semibold text-gray-800 mb-6">Criar Nova Meta</h3>
        <form onSubmit={handleAddGoal} className="space-y-4">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Nome da Meta *</label>
              <input
                type="text"
                value={formData.name || ''}
                onChange={(e) => setFormData({...formData, name: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="Ex: Viagem, Carro novo"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Valor Alvo *</label>
              <input
                type="number"
                step="0.01"
                value={formData.targetAmount || ''}
                onChange={(e) => setFormData({...formData, targetAmount: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="0.00"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-semibold text-gray-700 mb-2">Data Limite *</label>
              <input
                type="date"
                value={formData.deadline || ''}
                onChange={(e) => setFormData({...formData, deadline: e.target.value})}
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required
              />
            </div>
          </div>

          {error && (
            <div className="bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-xl text-sm flex items-center gap-2">
              <AlertTriangle className="w-4 h-4" />
              {error}
            </div>
          )}

          {success && (
            <div className="bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-xl text-sm">
              {success}
            </div>
          )}

          <button
            type="submit"
            className="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg"
          >
            Criar Meta
          </button>
        </form>
      </div>

      <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100">
        <h3 className="text-xl font-semibold text-gray-800 mb-6">Minhas Metas</h3>
        {goals.length === 0 ? (
          <div className="text-center py-12">
            <Target className="w-16 h-16 text-gray-300 mx-auto mb-4" />
            <p className="text-gray-500">Nenhuma meta definida</p>
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {goals.map(goal => {
              const progress = (goal.currentAmount / goal.targetAmount) * 100;
              const daysLeft = Math.ceil((new Date(goal.deadline) - new Date()) / (1000 * 60 * 60 * 24));

              return (
                <div key={goal.id} className="p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl border-2 border-blue-100">
                  <div className="flex items-center justify-between mb-4">
                    <h4 className="font-bold text-gray-800 text-xl">{goal.name}</h4>
                    <Award className="w-8 h-8 text-blue-600" />
                  </div>
                  <div className="mb-4">
                    <div className="flex justify-between text-sm mb-2">
                      <span className="text-gray-600">Progresso</span>
                      <span className="font-bold text-blue-600">{progress.toFixed(0)}%</span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-3">
                      <div 
                        className="bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500"
                        style={{ width: `${Math.min(progress, 100)}%` }}
                      ></div>
                    </div>
                  </div>
                  <div className="space-y-2">
                    <div className="flex justify-between text-sm">
                      <span className="text-gray-600">Economizado:</span>
                      <span className="font-semibold text-gray-800">R$ {goal.currentAmount.toFixed(2)}</span>
                    </div>
                    <div className="flex justify-between text-sm">
                      <span className="text-gray-600">Meta:</span>
                      <span className="font-semibold text-gray-800">R$ {goal.targetAmount.toFixed(2)}</span>
                    </div>
                    <div className="flex justify-between text-sm">
                      <span className="text-gray-600">Prazo:</span>
                      <span className={`font-semibold ${daysLeft < 30 ? 'text-red-600' : 'text-gray-800'}`}>
                        {daysLeft > 0 ? `${daysLeft} dias` : 'Expirado'}
                      </span>
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        )}
      </div>
    </div>
  );

  const Navigation = () => (
    <nav className="bg-white shadow-md border-b border-gray-200">
      <div className="px-6 py-4">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className="bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl p-2">
              <Wallet className="w-6 h-6 text-white" />
            </div>
            <span className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent">FinControl Pro</span>
          </div>
          
          <div className="hidden md:flex items-center gap-2">
            <button
              onClick={() => setPage('dashboard')}
              className={`px-4 py-2 rounded-xl font-medium transition-all ${page === 'dashboard' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-100'}`}
            >
              Dashboard
            </button>
            <button
              onClick={() => setPage('transactions')}
              className={`px-4 py-2 rounded-xl font-medium transition-all ${page === 'transactions' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-100'}`}
            >
              Lan√ßamentos
            </button>
            <button
              onClick={() => setPage('reports')}
              className={`px-4 py-2 rounded-xl font-medium transition-all ${page === 'reports' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-100'}`}
            >
              Relat√≥rios
            </button>
            <button
              onClick={() => setPage('budgets')}
              className={`px-4 py-2 rounded-xl font-medium transition-all ${page === 'budgets' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-100'}`}
            >
              Or√ßamentos
            </button>
            <button
              onClick={() => setPage('goals')}
              className={`px-4 py-2 rounded-xl font-medium transition-all ${page === 'goals' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-100'}`}
            >
              Metas
            </button>
            <button
              onClick={handleLogout}
              className="px-4 py-2 rounded-xl font-medium text-red-600 hover:bg-red-50 transition-all flex items-center gap-2 ml-2"
            >
              <LogOut className="w-4 h-4" />
              Sair
            </button>
          </div>
        </div>
      </div>
    </nav>
  );

  if (!user) {
    return page === 'login' ? <LoginPage /> : <RegisterPage />;
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50">
      <Navigation />
      <div className="max-w-7xl mx-auto px-4 md:px-6 py-8">
        {page === 'dashboard' && <DashboardPage />}
        {page === 'transactions' && <TransactionsPage />}
        {page === 'reports' && <ReportsPage />}
        {page === 'budgets' && <BudgetsPage />}
        {page === 'goals' && <GoalsPage />}
      </div>

      {/* Rodap√© com informa√ß√µes */}
      <footer className="bg-white border-t border-gray-200 mt-12">
        <div className="max-w-7xl mx-auto px-6 py-8">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <h4 className="font-bold text-gray-800 mb-3">‚ú® Recursos Atuais</h4>
              <ul className="space-y-2 text-sm text-gray-600">
                <li>‚Ä¢ Exporta√ß√£o de relat√≥rios (PDF/Excel)</li>
                <li>‚Ä¢ Categorias personaliz√°veis</li>
                <li>‚Ä¢ Recorr√™ncia autom√°tica</li>
                <li>‚Ä¢ Multi-moedas</li>
                <li>‚Ä¢ Backup em nuvem</li>
                <li>‚Ä¢ App mobile</li>
                <li>‚Ä¢ Integra√ß√£o banc√°ria</li>
              </ul>
            </div>
            <div>
              <h4 className="font-bold text-gray-800 mb-3">üí° Sobre o Sistema</h4>
              <p className="text-sm text-gray-600 mb-3">
                Sistema completo de controle financeiro pessoal com recursos avan√ßados para gerenciar suas finan√ßas de forma inteligente e eficiente.
              </p>
              <p className="text-xs text-gray-500">
                Vers√£o 1.0 ‚Ä¢ Todos os dados s√£o armazenados localmente e criptografados
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default FinancialSystem;space-y-2 text-sm text-gray-600">
                <li>‚Ä¢ Dashboard interativo</li>
                <li>‚Ä¢ Gest√£o de transa√ß√µes</li>
                <li>‚Ä¢ Relat√≥rios visuais</li>
                <li>‚Ä¢ Controle de or√ßamentos</li>
                <li>‚Ä¢ Metas financeiras</li>
                <li>‚Ä¢ Alertas inteligentes</li>
              </ul>
            </div>
            <div>
              <h4 className="font-bold text-gray-800 mb-3">üöÄ Pr√≥ximas Atualiza√ß√µes</h4>
              <ul className="
